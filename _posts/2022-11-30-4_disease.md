---
layout: post
title:  "[Python]4대 질병"
date:   2022-11-13
excerpt: "4대 질병 과제 코드(No PyQt)"
project: true
tag:
- blog
comments: true
---

#### 4대 질병
---
{% highlight yaml %}
import csv

class Virus:
    def __init__(self):
        self.area = input("지역 : ") # ex) 서울, 경기, 부산 등
        self.date = input("날짜 : ")  # 2014년 ~ 2018년
        self.virus = input("질병 : ")  # 감기 or 눈병
        self.info(self.virus, self.date) # 입력한 질병과 날짜 전달

    def area_code(self):
        o = dict() # 딕셔너리 생성

        f = open('시도 지역코드.csv', 'r')
        r = csv.reader(f)
        for l in list(r)[1:]:
            s = self.city_code(l[0]) # 시도 지역 코드 전송 / 지역마다 다른 리스트 정보 리턴
            o[l[1]] = s
            # {
            # '서울' : [['시군구명', '발생건수'], [...], ['총합', [발생건수 총합]],
            # '부산' : [[...], ...],
            # ...
            # }
        f.close()

        return o

    def city_code(self, number):
        hh = []
        c = 0

        ff = open('시군구 지역코드.csv', 'r')
        rr = csv.reader(ff)
        for ll in list(rr)[1:]:
            if ll[0] == number and (self.date, ll[1]) in self.oo.keys(): # 시도 지역 코드가 같고 (날짜, 시군구 지역 코드)가 딕셔너리 키에 있으면
                hh.append([ll[2], self.oo[(self.date, ll[1])]]) # hh 리스트에 ['시군구명', '발생건수'] 형태로 추가
                c = c + int(self.oo[(self.date, ll[1])]) # 발생건수 합 계산
            else: # 시도 지역 코드가 같지 않거나, (날짜, 시군구 지역 코드)가 딕셔너리에 없을 경우 pass
                pass
        ff.close()

        hh.append(['총합', str(c)]) # 마지막에 발생건수 추가

        return hh # hh 리스트 형태 --- [['시군구명', '발생건수'], [...], [...], ['총합', '발생건수 총합']

    def info(self, vir, dt):
        self.oo = dict() # 딕셔너리 생성

        fff = open('실제진료정보_{}_시군구.csv'.format(vir), 'r')
        rrr = csv.reader(fff)
        for lll in list(rrr)[1:]:
            if lll[0] == dt:
                self.oo[(lll[0],lll[1])] = lll[2] # {(날짜, 시군구 지역코드) : 발생건수}
            elif lll[0] > dt: # 입력한 날짜를 지날 경우 멈춤
                break
        fff.close()

    def print_code(self):
        p = self.area_code() #모든 지역별 정보 받기
        re = p[self.area] # 입력한 지역명으로 된 키 찾아 re에 저장
    
        return re

if __name__ == "__main__":
    v = Virus()
    vv = v.print_code()
    for w in vv:
        print(' '.join(w))

{% endhighlight %}
